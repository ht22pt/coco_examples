<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<script src="vendor/jquery/dist/jquery.min.js"></script>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/themes/smoothness/jquery-ui.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.3/jquery-ui.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css"/>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css"/>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<html xmlns="http://www.w3.org/1999/xhtml"/>
<link rel="stylesheet" href="static/styles/styles.css"/>

<script>
  // function to highlight selected tab
  $(function () {
    highlightTab = function (tab) {
      $('#' + tab + 'TabHead').css('background-color', '#e16c03');
      $('#' + tab + 'TabBody').css('background-color', '#02b770');
      $('#' + tab + 'TabBody').css('color', '#1d2125');
    }
  });
</script>


<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link rel="stylesheet" href="vendor/jquery-tagit/css/jquery.tagit.css">
  <link rel="stylesheet" href="vendor/jquery-tagit/css/tagit.ui-zendesk.css">
  <title>COCO - Common Objects in Context</title>
  <script src="vendor/jquery-tagit/js/tag-it.min.js"></script>

  <script>
    var objects = [];
    var toggleState = false;
    var icon_name_list = [];
    var im_id_list = [];
    var search_state = 'GO';
    var url_state = 'closed';
    var sentences_state = 'closed';
    // =================== scroll load ==========================
    $(window).scroll(function () {
      if ($(window).scrollTop() + $(window).height() === $(document).height()) {
        loadSearch();
      }
    });

    $(window).load(function () {
      $('#canvas_template').hide();
      // change header image
      highlightTab('explore');
      setupIconsSearchPanel();

      // setup dialog
      $("#dialog-modal").dialog({
        autoOpen: false,
        height: 250,
        modal: true,
        buttons: {
          'ok': function () {
            $(this).dialog("close");
          }
        }
      });
// end of window.load
    });
    // =============== TAG IT SET UP ======================
    $(function () {
      $("#tags").tagit({
        availableTags: [

          'person',
          'bicycle',
          'car',
          'motorcycle',
          'airplane',
          'bus',
          'train',
          'truck',
          'boat',
          'traffic light',
          'fire hydrant',
          'stop sign',
          'parking meter',
          'bench',
          'bird',
          'cat',
          'dog',
          'horse',
          'sheep',
          'cow',
          'elephant',
          'bear',
          'zebra',
          'giraffe',
          'backpack',
          'umbrella',
          'handbag',
          'tie',
          'suitcase',
          'frisbee',
          'skis',
          'snowboard',
          'sports ball',
          'kite',
          'baseball bat',
          'baseball glove',
          'skateboard',
          'surfboard',
          'tennis racket',
          'bottle',
          'wine glass',
          'cup',
          'fork',
          'knife',
          'spoon',
          'bowl',
          'banana',
          'apple',
          'sandwich',
          'orange',
          'broccoli',
          'carrot',
          'hot dog',
          'pizza',
          'donut',
          'cake',
          'chair',
          'couch',
          'potted plant',
          'bed',
          'dining table',
          'toilet',
          'tv',
          'laptop',
          'mouse',
          'remote',
          'keyboard',
          'cell phone',
          'microwave',
          'oven',
          'toaster',
          'sink',
          'refrigerator',
          'book',
          'clock',
          'vase',
          'scissors',
          'teddy bear',
          'hair drier',
          'toothbrush'
        ],
        allowDuplicates: false,
        afterTagAdded: function (event, ui) {
          if (icon_name_list.indexOf(ui.tagLabel) !== -1 || !isNaN(ui.tagLabel)) {
            addTags(ui.tagLabel);
          } else {
            $("#tags").tagit("removeTagByLabel", ui.tagLabel);
          }
        },
        afterTagRemoved: function (event, ui) {
          removeTags(ui.tagLabel);
        }
      });
    });

    // =============== load visualization by sebd AJAX ======
    function loadVisualizations(tags) {
      $('#btn-search').attr("disabled", "disabled");

      $('#btn-loading').show();
//    $('#btn-search').hide();
      if (search_state === 'STOP') {
        $('#btn-search').removeAttr("disabled");
        $('#btn-loading').hide();
        return -1;
      }
      $('#btn-stop').hide();
      if (search_state === 'LOADING') {
        return -1;
      }
      search_state = 'LOADING';
      var req = {};
      if (tags.length === 0) {
        tags = ["RANDOM"];
      }
      //alert(tags)
      req['tags'] = tags;
      req['im_id_list'] = im_id_list;
      req = JSON.stringify(req);
      $.ajax({
        type: 'POST',
        url: '/explore_visualization/',
        data: {'req': req},
      }).done(function (data) {
        $('#btn-search').removeAttr("disabled");
        if (data === '') {
          $('#btn-loading').hide();
          $('#btn-stop').show();
          search_state = 'STOP';
          return -1;
        }
        var data = JSON.parse(data);
        var objs_list = data['objs_list'];
        var search_count = data['count'];
        if ($('#search-count').text() === '') {
          if (search_count === 1) {
            $('#search-count').text(search_count + ' result');
          } else {
            $('#search-count').text(search_count + ' results');
          }
        }
        for (ind = 0; ind < objs_list.length; ind++) {
          createImage(objs_list[ind]);
          im_id_list.push(objs_list[ind]['id']);
        }
        search_state = 'GO';
      });
    }
    // create DOM structure for one image
    function createImage(objs) {
      var canvas_div = $('#canvas_template').clone();
      canvas_div.addClass('canvas_template');
      canvas_div.show();
      var imidDOM = canvas_div.children('.imid');
      var sentencesDOM = canvas_div.children('.sentences');
      var urlDOM = canvas_div.children('.url');
      var canvasDOM = canvas_div.children('.canvas_div').children('canvas')[0];
      var iconsDOM = canvas_div.children('.icons');
      objects = objs;
      var im = new Image();
      im.src = 'https://msvocds.blob.core.windows.net/images/' + objs['urlid'] + '_z.jpg';
//     imidDOM.text('image id: ' + objs['id']);
      // process sentence
      sentences = objs['sentences'];
      txt = '';
      for (i = 0; i < sentences.length; i++) {
        txt += sentences[i].toLowerCase() + '<br>';
      }
      sentencesDOM.html(txt);
      // process url
      urlDOM.html('<a href="http://mscoco.org/explore/?id=' + objs['id'] + '" target="_blank">' + 'http://mscoco.org/explore/?id=' + objs['id'] + '</a>' +
        '<br>' +
        '<a href="' + objs['flickrurl'] + '" target="_blank">' + objs['flickrurl'] + '</a>');
      // control toggle
      if (sentences_state === 'open') {
        $(".sentences").show();
      }

      im.objs = objs;
      im.iconsDOM = iconsDOM;
      im.canvasDOM = canvasDOM;
      im.urlDOM = urlDOM;
      im.sentencesDOM = sentencesDOM;
      im.canvas_id = canvas_div;
      im.canvas_div = canvas_div;
      canvas_div.appendTo('#contentColumn');
      // create toggle
      sentencesDOM.hide();
      im.onload = function () {
        var objs = im.objs;
        var iconsDOM = im.iconsDOM;
        var icon_list = [];
        var convas_div = im.convas_div;
        var canvas = im.canvasDOM;
        var ctx = canvas.getContext("2d");

        canvas.width = this.width;
        canvas.height = this.height;
        ctx.drawImage(this, 0, 0);
        var icon_name_list = [];
        for (i = 0; i < objs['object'].length; i++) {
          // add icons
          var cat_id = objs['object'][i].cat_id;
          var name = objs['object'][i].name;
          if (icon_list.indexOf(cat_id) === -1) {
            icon_list.push(cat_id);
            icon_name_list.push(name);
          }
        }
        im.icon_name_list = icon_name_list;
        renderSegmentation(objs, icon_list, this, ctx);
        renderIcons(objs, icon_list, this, ctx);

        canvas_div.data('im', this);
        canvas_div.on('canvasToggleEventHandler', function (e, eventInfo) {
          var im = $(this).data('im');
          if (eventInfo === true) {
            renderImage(objs, im, ctx);
          } else {
            renderSegmentation(objs, icon_list, im, ctx);
          }
        });
        $('#btn-loading').hide();
      }
    }
    // render icons_list
    function renderIcons(objs, icon_list, im, ctx) {
      im.iconsDOM.empty();

      // url icons
      var icon = $('<span class="icon_list" sytle="display:inline-block;width:50px;height:50px" title="url to share this image"><img style="width:50px;height:50px"  src="static/icons/url.jpg"></span>')
      icon.appendTo(im.iconsDOM);
      icon.click(
        function (ev) {
          if (url_state === 'closed') {
            $('.url').show('slow');
            url_state = 'open'
          }
          else if (url_state === 'open') {
            $('.url').hide('slow');
            url_state = 'closed'
          }
        }
      );

      // sentences icon
      var icon = $('<span class="icon_list" sytle="display:inline-block;width:50px;height:50px" title="show captions"><img style="width:50px;height:50px; margin-right:10px"  src="static/icons/sentences.jpg"></span>')
      icon.appendTo(im.iconsDOM);
      icon.click(
        function () {
          if (sentences_state === 'closed') {
            $('.sentences').show('slow');
            sentences_state = 'open'
          }
          else if (sentences_state === 'open') {
            $('.sentences').hide('slow');
            sentences_state = 'closed'
          }
        }
      );

      // group icons
      for (i = 0; i < icon_list.length; i++) {
        var icon = $('<span class="icon_list" sytle="display:inline-block;width:50px;height:50px" title="' + im.icon_name_list[i] + '"><img style="width:50px;height:50px"  src="static/icons/' + icon_list[i] + '.jpg"></span>')
        icon.appendTo(im.iconsDOM);
        icon.data('cat_id', icon_list[i])
        icon.hover(
          function () {
            if (toggleState === false) {
              renderImage(objs, im, ctx);
              renderSegmentation(objs, [$(this).data('cat_id')], im, ctx)
//                    renderDots(objs, [$(this).data('cat_id')], im, ctx)
            }
          },
          function () {
            if (toggleState === false) {
              renderImage(objs, im, ctx);
              renderSegmentation(objs, icon_list, im, ctx);
            }
          }
        );
        icon.click(function () {
          var target_offset = icon.offset();
          var target_top = target_offset.top - 35;
          $('html, body').animate({scrollTop: target_top}, 1000, 'easeInSine');
        });
      }
      // blank icons
      var icon = $('<span class="icon_list" sytle="display:inline-block;width:50px;height:50px" title="hide segmentations"><img style="width:50px;height:50px"  src="static/icons/blank.jpg"></span>')
      icon.appendTo(im.iconsDOM);
      icon.hover(
        function () {
          renderImage(objs, im, ctx);
        },
        function () {
          renderSegmentation(objs, icon_list, im, ctx);
        }
      );
      icon.click(function () {
        var target_offset = icon.offset();
        var target_top = target_offset.top - 35;
        $('html, body').animate({scrollTop: target_top}, 1000, 'easeInSine');
      });


    }
    // redner dots
    function renderDots(objs, icon_list, im, ctx) {
      for (i = 0; i < icon_list.length; i++) {
        var click_list = objs['clicks'][icon_list[i]];
        for (j = 0; j < click_list.length; j++) {
          ctx.font = "60px Georgia";
          ctx.fillStyle = 'rgba(' + 0 + ',' + 0 + ',' + 0 + ',1)';
          ctx.fillText("+", click_list[j][0] * im.width - 30 - 2, click_list[j][1] * im.height + 30);
          ctx.fillText("+", click_list[j][0] * im.width - 30 - 2, click_list[j][1] * im.height + 30);
          ctx.fillText("+", click_list[j][0] * im.width - 30 + 2, click_list[j][1] * im.height + 30);
          ctx.fillText("+", click_list[j][0] * im.width - 30 + 2, click_list[j][1] * im.height + 30);
          ctx.fillText("+", click_list[j][0] * im.width - 30, click_list[j][1] * im.height + 28);
          ctx.fillText("+", click_list[j][0] * im.width - 30, click_list[j][1] * im.height + 28);
          ctx.fillText("+", click_list[j][0] * im.width - 30, click_list[j][1] * im.height + 32);
          ctx.fillText("+", click_list[j][0] * im.width - 30, click_list[j][1] * im.height + 32);
          ctx.fillStyle = 'rgba(' + 255 + ',' + 255 + ',' + 255 + ',1)';
          ctx.fillText("+", click_list[j][0] * im.width - 30, click_list[j][1] * im.height + 30);
          ctx.fillText("+", click_list[j][0] * im.width - 30, click_list[j][1] * im.height + 30);
        }
      }
    }
    // render segmentation
    function renderSegmentation(objs, icon_list, im, ctx) {
      for (i = 0; i < objs['object'].length; i++) {
        if (icon_list.indexOf(objs['object'][i]['cat_id']) === -1) {
          continue
        }
        // set color for each object
        var r = Math.floor(Math.random() * 255);
        var g = Math.floor(Math.random() * 255);
        var b = Math.floor(Math.random() * 255);
        ctx.fillStyle = 'rgba(' + r + ',' + g + ',' + b + ',0.7)';
        poly_x = objs['object'][i]['poly_x'];
        poly_y = objs['object'][i]['poly_y'];
//         poly_x_split = poly_x_str.split(';');
//         poly_y_split = poly_y_str.split(';');
        for (j = 0; j < poly_x.length; j++) {
          px = poly_x[j];
          py = poly_y[j];
          // let's draw!!!!
          ctx.beginPath();
          ctx.moveTo(parseFloat(px[0]), parseFloat(py[0]));
          for (k = 1; k < px.length; k += 1) {
            ctx.lineTo(parseFloat(px[k]), parseFloat(py[k]));
          }
//             ctx.moveTo(parseFloat(px[0])*im.width, parseFloat(py[0])*im.height);
//             for (k=1; k< px.length; k+=1){
//                 ctx.lineTo(parseFloat(px[k])*im.width, parseFloat(py[k])*im.height);
//             }
          ctx.lineWidth = 3;
          ctx.closePath();
          ctx.fill();
          ctx.strokeStyle = 'black';
          ctx.stroke();
        }
      }
    }
    function renderImage(objs, im, ctx) {
      ctx.clearRect(0, 0, im.width, im.height);
      ctx.drawImage(im, 0, 0);
    }
    function loadSearch() {
      loadVisualizations($("#tags").tagit("assignedTags"));
    }
    function clearCanvas() {
      search_state = 'GO';
      im_id_list = [];
      $('.canvas_template').remove();
    }

    function setupIconsSearchPanel() {
      var icons = $(".icons");
      for (i = 0; i < icons.length; i++) {
        var icon = $(icons[i]);
        icon.data('state', true);
        icon.mousedown(function (ev) {
            var state = $(this).data('state');
            var cat_name = $(this).attr('title');
            if (state) {
              $(this).css('border-color', '#00FF00');
              $("#tags").tagit("createTag", cat_name);
            } else {
              $(this).css('border-color', 'transparent');
              $("#tags").tagit("removeTagByLabel", cat_name);
            }
            $(this).data('state', !state);
          }
        );
        icon_name_list.push(icon.attr('title'));
      }
    }

    function removeTags(tag) {
      var icons = $(".icons");
      for (i = 0; i < icons.length; i++) {
        var icon = $(icons[i]);
        if (icon.attr('title') === tag) {
          var state = icon.data('state');
          icon.data('state', true);
          icon.css('border-color', 'transparent');
        }
      }
    }
    function addTags(tag) {
      var icons = $(".icons");
      for (i = 0; i < icons.length; i++) {
        var icon = $(icons[i]);
        if (icon.attr('title') === tag) {
          var state = icon.data('state');
          icon.data('state', false);
          icon.css('border-color', '#00FF00');
        }
      }
    }

  </script>

</head>

<body>

<div id="header">
  <div id="logoTabs">
    <div style="display:inline-block; width:313px; margin-left:14px; margin-top:4px">
      <img id="logoImage" style="width:285px; height:80px" src="static/images/logo.png" alt="Logo"/>
    </div>
    <div style="width:400px; color:white;display:inline-block;position: absolute;bottom: 5px;">
      <div
        style="width:376px; height:55px; color:white;display:inline-block; margin-left: 40pt; font-size:10pt;text-align:right">
        cocodataset@outlook.com
      </div>
      <div style="width:440px;margin-left:0px;display:inline-block">
        <div id="homeTab" class="tabDivSelected" style="width:75px" onclick="window.location='/home'">
          <div id="homeTabHead" class="tabDivSeparaterSelected1"></div>
          <div class="tabDivSeparater2"></div>
          <div id="homeTabBody" style="height:46px;font-size:16pt">
            Home
          </div>
          <div class="tabDivSeparater2" style="height:5px"></div>
        </div>
        <div id="peopleTab" class="tabDiv" style="width:75px" onclick="window.location='/people'">
          <div id="peopleTabHead" class="tabDivSeparater1"></div>
          <div class="tabDivSeparater2"></div>
          <div id="peopleTabBody" style="height:46px;font-size:16pt">
            People
          </div>
          <div class="tabDivSeparater2" style="height:5px"></div>
        </div>
        <div id="exploreTab" class="tabDiv" style="width:85px" onclick="window.location='/explore'">
          <div id="exploreTabHead" class="tabDivSeparater1"></div>
          <div class="tabDivSeparater2"></div>
          <div id="exploreTabBody" style="height:46px;font-size:16pt">
            Explore
          </div>
          <div class="tabDivSeparater2" style="height:5px"></div>
        </div>
        <div id="downloadTab" class="tabDiv" style="width:85px" onclick="window.location='/dataset'">
          <div id="downloadTabHead" class="tabDivSeparater1"></div>
          <div class="tabDivSeparater2"></div>
          <div id="downloadTabBody" style="height:46px;font-size:16pt">
            Dataset
          </div>
          <div class="tabDivSeparater2" style="height:5px"></div>
        </div>
        <div id="externalTab" class="tabDiv" style="width:90px" onclick="window.location='/external'">
          <div id="externalTabHead" class="tabDivSeparater1"></div>
          <div class="tabDivSeparater2"></div>
          <div id="externalTabBody" style="height:46px;font-size:16pt">
            External
          </div>
          <div class="tabDivSeparater2" style="height:5px"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="dialog-modal" title="Message"></div>
<div id="contentRow" style="height:640px; margin-top:165px">
  <div class="centerwrapper">
    <div id="contentColumn">
      <div class="ui-widget">
        <span style='color:black;font-size:12pt'> COCO 2014 train/val browser (123,287 images, 886,284 instances). Crowd labels not shown.  </span>
        <div id='icon_panel' style="margin-bottom:25px">
          <div class='icon_group' style='width:800px'>

            <div style="width:70px;height:150px; display:inline-block;vertical-align:top; margin-left:-3px">


              <div id="icon_1" class="icons" title="person"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/1.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_27" class="icons" title="backpack"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/27.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_28" class="icons" title="umbrella"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/28.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_31" class="icons" title="handbag"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/31.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_32" class="icons" title="tie"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/32.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_33" class="icons" title="suitcase"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/33.jpg' style='width:30px;height:30px' />
              </div>


            </div>

            <div style="width:70px;height:150px; display:inline-block;vertical-align:top; margin-left:-3px">


              <div id="icon_2" class="icons" title="bicycle"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/2.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_3" class="icons" title="car"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/3.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_4" class="icons" title="motorcycle"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/4.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_5" class="icons" title="airplane"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/5.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_6" class="icons" title="bus"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/6.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_7" class="icons" title="train"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/7.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_8" class="icons" title="truck"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/8.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_9" class="icons" title="boat"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/9.jpg' style='width:30px;height:30px' />
              </div>


            </div>

            <div style="width:70px;height:150px; display:inline-block;vertical-align:top; margin-left:-3px">


              <div id="icon_10" class="icons" title="traffic light"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/10.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_11" class="icons" title="fire hydrant"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/11.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_13" class="icons" title="stop sign"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/13.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_14" class="icons" title="parking meter"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/14.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_15" class="icons" title="bench"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/15.jpg' style='width:30px;height:30px' />
              </div>


            </div>

            <div style="width:70px;height:150px; display:inline-block;vertical-align:top; margin-left:-3px">


              <div id="icon_16" class="icons" title="bird"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/16.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_17" class="icons" title="cat"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/17.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_18" class="icons" title="dog"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/18.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_19" class="icons" title="horse"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/19.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_20" class="icons" title="sheep"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/20.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_21" class="icons" title="cow"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/21.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_22" class="icons" title="elephant"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/22.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_23" class="icons" title="bear"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/23.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_24" class="icons" title="zebra"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/24.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_25" class="icons" title="giraffe"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/25.jpg' style='width:30px;height:30px' />
              </div>


            </div>

            <div style="width:70px;height:150px; display:inline-block;vertical-align:top; margin-left:-3px">


              <div id="icon_34" class="icons" title="frisbee"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/34.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_35" class="icons" title="skis"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/35.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_36" class="icons" title="snowboard"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/36.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_37" class="icons" title="sports ball"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/37.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_38" class="icons" title="kite"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/38.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_39" class="icons" title="baseball bat"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/39.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_40" class="icons" title="baseball glove"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/40.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_41" class="icons" title="skateboard"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/41.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_42" class="icons" title="surfboard"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/42.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_43" class="icons" title="tennis racket"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/43.jpg' style='width:30px;height:30px' />
              </div>


            </div>

            <div style="width:70px;height:150px; display:inline-block;vertical-align:top; margin-left:-3px">


              <div id="icon_44" class="icons" title="bottle"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/44.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_46" class="icons" title="wine glass"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/46.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_47" class="icons" title="cup"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/47.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_48" class="icons" title="fork"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/48.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_49" class="icons" title="knife"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/49.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_50" class="icons" title="spoon"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/50.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_51" class="icons" title="bowl"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/51.jpg' style='width:30px;height:30px' />
              </div>


            </div>

            <div style="width:70px;height:150px; display:inline-block;vertical-align:top; margin-left:-3px">


              <div id="icon_52" class="icons" title="banana"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/52.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_53" class="icons" title="apple"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/53.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_54" class="icons" title="sandwich"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/54.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_55" class="icons" title="orange"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/55.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_56" class="icons" title="broccoli"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/56.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_57" class="icons" title="carrot"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/57.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_58" class="icons" title="hot dog"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/58.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_59" class="icons" title="pizza"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/59.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_60" class="icons" title="donut"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/60.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_61" class="icons" title="cake"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/61.jpg' style='width:30px;height:30px' />
              </div>


            </div>

            <div style="width:70px;height:150px; display:inline-block;vertical-align:top; margin-left:-3px">


              <div id="icon_62" class="icons" title="chair"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/62.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_63" class="icons" title="couch"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/63.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_64" class="icons" title="potted plant"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/64.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_65" class="icons" title="bed"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/65.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_67" class="icons" title="dining table"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/67.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_70" class="icons" title="toilet"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/70.jpg' style='width:30px;height:30px' />
              </div>


            </div>

            <div style="width:70px;height:150px; display:inline-block;vertical-align:top; margin-left:-3px">


              <div id="icon_72" class="icons" title="tv"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/72.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_73" class="icons" title="laptop"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/73.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_74" class="icons" title="mouse"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/74.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_75" class="icons" title="remote"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/75.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_76" class="icons" title="keyboard"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/76.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_77" class="icons" title="cell phone"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/77.jpg' style='width:30px;height:30px' />
              </div>


            </div>

            <div style="width:70px;height:150px; display:inline-block;vertical-align:top; margin-left:-3px">


              <div id="icon_78" class="icons" title="microwave"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/78.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_79" class="icons" title="oven"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/79.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_80" class="icons" title="toaster"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/80.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_81" class="icons" title="sink"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/81.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_82" class="icons" title="refrigerator"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/82.jpg' style='width:30px;height:30px' />
              </div>


            </div>

            <div style="width:70px;height:150px; display:inline-block;vertical-align:top; margin-left:-3px">


              <div id="icon_84" class="icons" title="book"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/84.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_85" class="icons" title="clock"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/85.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_86" class="icons" title="vase"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/86.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_87" class="icons" title="scissors"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/87.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_88" class="icons" title="teddy bear"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/88.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_89" class="icons" title="hair drier"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/89.jpg' style='width:30px;height:30px' />
              </div>


              <div id="icon_90" class="icons" title="toothbrush"
                   style="margin-right:-8px;width:36px;height:36px;display:inline-block;vertical-align:top; border-color:transparent;border-style:solid;border-width:3px;cursor:pointer;">
                <img src='static/icons/90.jpg' style='width:30px;height:30px' />
              </div>


            </div>

          </div>
        </div>
        <div style="width:800px;">
          <div style='width:88%;display:inline-block;vertical-align:middle'>
            <input id="tags" style='width:80%'/>
          </div>
          <div style='width:10%;height:74px;display:inline-block;vertical-align:middle'>
            <button id="btn-search" type="button" style='margin-top:13px;font-size:14pt;height:37px;'
                    class="btn btn-primary" onclick='clearCanvas();$("#search-count").text("");loadSearch();'>
              search
            </button>
          </div>
          <div id='search-count' style='font-size:8pt;color:#888888;margin-top:-15px;margin-bottom:15px'></div>
        </div>
      </div>
      <span id='msg'> </span>
      <div id='canvas_template' style='margin-bottom:15px'>
        <div class="imid"></div>
        <div class="icons" style='display:inline-block'></div>
        <div class="url" style="color:black;display:none;cursor:pointer"></div>
        <div class="sentences" style="color:black;cursor:pointer"></div>
        <div class="canvas_div" style="margin-top:1px">
          <canvas class="canvas"></canvas>
        </div>
      </div>
    </div>
    <div id="btn-loading" align="center" style="display:none"><img src='static/images/ajax-loader.gif'></img></div>
    <div id="btn-stop" align="center" style="display:none;color:black">no more images to show</img></div>
  </div>
  <p><br/></p>

  <div class="footer">
    <div class="centerFullArea" style="font-weight:100">
      <div style="display:inline-block; padding-left:85%; line-height: 30px; font-size:14px; font-weight:100">
        <a href="/terms_of_use" target="_blank" style="color:white">Terms of Use</a>
      </div>
    </div>
  </div>

</div>

</body>
</html>
